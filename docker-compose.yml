version: '2'

#networks:
#    default:
#        external:
#             name: local_net

services:

    jeedom:
        container_name: jeedom
        build : ./
        privileged: false
        pid: "host"
        cap_add:
             - SYS_PTRACE
        # tty: true
        hostname: jeedom
        #mac_address: a0:ca:ab:cd:ef:02
        #networks:
        #     default:
        #        ipv4_address: 192.168.1.11
        # devices:
        #     - "/dev/ttyUSB0"
        #     - "/dev/ttyUSB1"
        #     - "/dev/ttyACM0"
        restart: unless-stopped
        volumes:
          - ../jeedom:/var/www/html
        ports:
            - "80:80"

    db:
        container_name: db
        image: ghcr.io/linuxserver/mariadb
        restart: unless-stopped
        # env_file:
        #     - ./.env
        environment:
          - PUID=1000
          - PGID=1000
          - MYSQL_ROOT_PASSWORD=admin
          - TZ=Europe/Paris
          - MYSQL_DATABASE=jeedom #optional
          - MYSQL_USER=jeedom #optional
          - MYSQL_PASSWORD=jeedom #optional
          # - REMOTE_SQL=http://URL1/your.sql,https://URL2/your.sql #optional
        volumes:
            - ./db:/config
        ports:
            - 3306:3306

    adminer:
        container_name: adminer
        image: adminer
        ports:
            - "8080:8080"
